language: python
virtualenv:
  system_site_packages: true
env:
  matrix:
    - PYTHON_VERSION="2.7"  PARALLEL="mpich2"  DISTRIB="conda"
    - PYTHON_VERSION="2.7"  PARALLEL="mpich2"  DISTRIB="ubuntu" COVERAGE="--coverage"
    #- PYTHON_VERSION="2.7"  PARALLEL="false"   DISTRIB="conda"
    #- PYTHON_VERSION="2.6"  PARALLEL="false"   DISTRIB="conda"

install: 
    - source tools/install_packages.sh
    - python setup.py install

script: 
    - python runtests.py $COVERAGE

after_success:
    #- if [[ "$COVERAGE" == "--coverage" ]]; then coveralls || echo "failed"; fi
    - if [ "${COVERAGE}" == "--coverage" ]; then pushd build/anuga_env/lib/python*/site-packages/ && cp ../../../../test/.coverage . && coveralls && popd; fi






